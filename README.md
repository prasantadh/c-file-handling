# c-file-handling

This repo is provides the second lab content for the networks class as taught
at New York University Abu Dhabi.

## Pre-Requisite

It is expected that you have gone over the
c-review available at [c-review][c-review] repo.

[c-review]: https://github.com/prasantadh/c-review

## Exercises

Where a question asks for a fix, there are more than one way to fix it.
Consider these exercises to be more of lecture notes for in-person discussion
rather than a strict guided path into c prowess.

### A little bit of UI

1. The `main` function currently runs without any argument. I would like it
to be called as such `./main <filename>` where `main` is the name of the
executable this repo compiles to and `filename` is can be any file that
I provide it. How can I check that a `filename` was provided?
If not, how can I print a nice message to the user and exit?
2. Install `inotify-tools` on your ubuntu machine. You can now use the loop
`while true; do inotify-wait -e modify main.c; clear; make; done;`
to run the make command automatically every `main.c` file changes.

### Working with the file

1. If I were to tell you that the functions that you need for file handling
are `fopen`, `fseek`, `fgetc`, `fread` and `fclose`,
where is the most authentic place to find information about them?
2. Open the file `data.bin`. What modes would you use? If you delete the `data.bin`
file, what error do you get? How can you report the error and exit gracefully?
3. Close the file. It's best practice (and often a must) to release any resource
you don't need anymore.
4. The given file `data.bin` is the following format:

<pre>
+----------------------------------------------+
| Preamble [40B]                               |
|----------------------------------------------|
| Name[7B], id[2B], grade[1B]                  |
|----------------------------------------------|
| Name[7B], id[2B], grade[1B]                  |
|----------------------------------------------|
| Name[7B], id[2B], grade[1B]                  |
|----------------------------------------------|
| Name[7B], id[2B], grade[1B]                  |
+----------------------------------------------+
</pre>

Notice that we do not need the first 40 bytes in the file. Skip them.

5. Produce a line of output that is just `id` and `grade` of the first record.
6. Do the same as question 5 for all following records in the file.

## Appendix

1. `data.bin` is generated by running `producer.py`. It depends on python `faker` package.
You can install it with `pip install faker`
2. Note the use of [automatic variables][Automatic-Variables] in makefile.

[Automatic-Variables]: <https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html>
